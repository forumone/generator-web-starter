steps:
  - label: ':hammer: Build'
    command:
      - npm ci
      # Allow npm to pack the tarball as root in this container
      - npm pack --unsafe-perm
    plugins:
      - docker#v3.3.0:
          image: 'node:10'
          volumes:
            - './:/app'

  - label: ':jest: Test'
    command:
      - npm ci
      - npm test
    plugins:
      - docker#v3.3.0:
          image: 'node:10'
          volumes:
            - './:/app'
